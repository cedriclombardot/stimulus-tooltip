import{Controller as t}from"@hotwired/stimulus";class e extends t{constructor(...t){super(...t),this.offset=null}show(t){this.offset=this.compute(this.positionValue),this.tipTarget.style.top=this.offset.top+"px",this.tipTarget.style.left=this.offset.left+"px",this.toggleClass(!0),this.dispatch("shown",{detail:{content:this.contentTarget,tip:this.tipTarget}})}hide(t){this.toggleClass(!1),this.dispatch("hidden",{detail:{content:this.contentTarget,tip:this.tipTarget}})}toggleClass(t){let e=this.offset.position,o=this.offset.position.split("-")[0];t?(this.element.classList.add("st-tooltip--visible"),this.tipTarget.classList.add(`st-tooltip__tip--${o}`,`st-tooltip__tip--${e}`)):(this.element.classList.remove("st-tooltip--visible"),this.tipTarget.classList.remove(`st-tooltip__tip--${o}`,`st-tooltip__tip--${e}`))}compute(t){let e=this.detailPositions(t);for(let t in e){let o=this.computeOffset(e[t]);if(!this.isOverflow(o))return o}return this.computeOffset(e[0])}detailPositions(t){return{top:["top-start","top-end","bottom-start","bottom-end"],"top-start":["top-start","top-end","bottom-start","bottom-end"],"top-end":["top-end","top-start","bottom-end","bottom-start"],bottom:["bottom-start","bottom-end","top-start","top-end"],"bottom-start":["bottom-start","bottom-end","top-start","top-end"],"bottom-end":["bottom-end","bottom-start","top-end","top-start"],left:["left-start","left-end","right-start","right-end"],"left-start":["left-start","left-end","right-start","right-end"],"left-end":["left-end","left-start","right-end","right-start"],right:["right-start","right-end","left-start","left-end"],"right-start":["right-start","right-end","left-start","left-end"],"right-end":["right-end","right-start","left-end","left-start"]}[t]}computeOffset(t){let e=this.contentTarget,o=this.tipTarget,s={position:t};switch(t){case"top-start":s.top=e.offsetTop-o.offsetHeight,s.left=e.offsetLeft;break;case"top-end":s.top=e.offsetTop-o.offsetHeight,s.left=e.offsetLeft+e.offsetWidth-o.offsetWidth;break;case"bottom-start":s.top=e.offsetTop+e.offsetHeight,s.left=e.offsetLeft;break;case"bottom-end":s.top=e.offsetTop+e.offsetHeight,s.left=e.offsetLeft+e.offsetWidth-o.offsetWidth;break;case"left-start":s.top=e.offsetTop,s.left=e.offsetLeft-o.offsetWidth;break;case"left-end":s.top=e.offsetTop+e.offsetHeight-o.offsetHeight,s.left=e.offsetLeft-o.offsetWidth;break;case"right-start":s.top=e.offsetTop,s.left=e.offsetLeft+e.offsetWidth;break;case"right-end":s.top=e.offsetTop+e.offsetHeight-o.offsetHeight,s.left=e.offsetLeft+e.offsetWidth}return s.bottom=s.top+this.tipTarget.offsetHeight,s.right=s.left+this.tipTarget.offsetWidth,s}isOverflow(t){return t.top<window.scrollY||t.bottom>window.innerHeight+window.scrollY||t.left<window.scrollX||t.right>window.innerWidth+window.scrollX}}e.targets=["tip","content"],e.values={position:{type:String,default:"top"}};export{e as default};
//# sourceMappingURL=index.modern.js.map
